import{_ as x}from"./CpIcon.65695a50.js";import{_ as I}from"./CpNavBar.e59f99e4.js";import{_ as T}from"./avatar-doctor.6805bde9.js";import{C as d}from"./CpRadioBtn.568fab2f.js";import{I as r}from"./index.90d7a540.js";import{u as y}from"./consult.95ebbc64.js";import{d as k,r as F,l as U,L as w,v as M,o as C,a as c,c as n,b as l,M as N,w as h,g as R,n as z,h as L,_ as O}from"./index.704bf49d.js";import{U as H}from"./index.86961649.js";import{s as S}from"./function-call.2cae2cfb.js";import{F as W}from"./index.5b122279.js";import{B as Y}from"./index.6b080f53.js";import{s as m}from"./request.3cade431.js";import"./use-placeholder.efae37ec.js";import"./index.e27673f9.js";import"./index.c01bdd85.js";import"./interceptor.d8cac4bc.js";import"./use-route.123cb7a7.js";import"./index.4b6ed35c.js";import"./use-id.6dd5551f.js";const j={class:"consult-illness-page"},q={class:"illness-tip van-hairline--bottom"},G={class:"info"},J={class:"safe"},K={class:"illness-form"},P={class:"item"},Q={class:"item"},X={class:"illness-img"},Z={key:0,class:"tip"},$=k({__name:"ConsultIllness",setup(uu){const v=[{label:"\u4E00\u5468\u5185",value:r.Week},{label:"\u4E00\u6708\u5185",value:r.Month},{label:"\u534A\u5E74\u5185",value:r.HalfYear},{label:"\u5927\u4E8E\u534A\u5E74",value:r.More}],_=[{label:"\u5C31\u8BCA\u8FC7",value:1},{label:"\u6CA1\u5C31\u8BCA\u8FC7",value:0}],s=F({pictures:[],consultFlag:void 0,illnessDesc:"",illnessTime:void 0}),a=F([]),f=e=>{var u;s.value.pictures=(u=s.value.pictures)==null?void 0:u.filter(o=>o.url!==e.url)},E=e=>{Array.isArray(e)||!e.file||(e.status="uploading",e.message="\u4E0A\u4F20\u4E2D...",y(e.file).then(u=>{var o;e.status="done",e.message=void 0,e.url=u.data.url,(o=s.value.pictures)==null||o.push(u.data)}).catch(()=>{e.status="failed",e.message="\u4E0A\u4F20\u5931\u8D25"}))},B=U(()=>s.value.consultFlag===void 0||!s.value.illnessDesc||s.value.illnessTime===void 0),p=w(),A=L(),g=()=>{if(!s.value.illnessDesc)return m("\u8BF7\u8F93\u5165\u75C5\u60C5\u63CF\u8FF0");if(s.value.illnessTime===void 0)return m("\u8BF7\u9009\u62E9\u75C7\u72B6\u6301\u7EED\u65F6\u95F4");if(s.value.consultFlag===void 0)return m("\u8BF7\u9009\u62E9\u662F\u5426\u5C31\u8BCA\u8FC7");p.setIllness(s.value),A.push("/user/patient?isChange=1")};return M(()=>{p.consult.illnessDesc&&S({title:"\u6E29\u99A8\u63D0\u793A",message:"\u662F\u5426\u6062\u590D\u4E4B\u524D\u586B\u5199\u7684\u6570\u636E?"}).then(()=>{const{illnessDesc:e,illnessTime:u,consultFlag:o,pictures:i}=p.consult;s.value={illnessDesc:e,illnessTime:u,consultFlag:o,pictures:i},a.value=i||[]})}),(e,u)=>{const o=I,i=x,D=W,b=H,V=Y;return C(),c("div",j,[n(o,{title:"\u56FE\u6587\u95EE\u8BCA"}),l("div",q,[u[7]||(u[7]=l("img",{class:"img",src:T},null,-1)),l("div",G,[u[5]||(u[5]=l("p",{class:"tit"},"\u5728\u7EBF\u533B\u751F",-1)),u[6]||(u[6]=l("p",{class:"tip"}," \u8BF7\u63CF\u8FF0\u4F60\u7684\u75BE\u75C5\u6216\u75C7\u72B6\u3001\u662F\u5426\u7528\u836F\u3001\u5C31\u8BCA\u7ECF\u5386\uFF0C\u9700\u8981\u6211\u542C\u8FC7\u4EC0\u4E48\u6837\u7684\u5E2E\u52A9 ",-1)),l("p",J,[n(i,{name:"consult-safe"}),u[4]||(u[4]=l("span",null,"\u5185\u5BB9\u4EC5\u533B\u751F\u53EF\u89C1",-1))])])]),l("div",K,[n(D,{type:"textarea",rows:"3",placeholder:"\u8BF7\u8BE6\u7EC6\u63CF\u8FF0\u60A8\u7684\u75C5\u60C5\uFF0C\u75C5\u60C5\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",modelValue:s.value.illnessDesc,"onUpdate:modelValue":u[0]||(u[0]=t=>s.value.illnessDesc=t)},null,8,["modelValue"]),l("div",P,[u[8]||(u[8]=l("p",null,"\u672C\u6B21\u60A3\u75C5\u591A\u4E45\u4E86\uFF1F",-1)),n(d,{options:v,modelValue:s.value.illnessTime,"onUpdate:modelValue":u[1]||(u[1]=t=>s.value.illnessTime=t)},null,8,["modelValue"])]),l("div",Q,[u[9]||(u[9]=l("p",null,"\u6B64\u6B21\u75C5\u60C5\u662F\u5426\u53BB\u533B\u9662\u5C31\u8BCA\u8FC7\uFF1F",-1)),n(d,{options:_,modelValue:s.value.consultFlag,"onUpdate:modelValue":u[2]||(u[2]=t=>s.value.consultFlag=t)},null,8,["modelValue"])]),l("div",X,[n(b,{"upload-icon":"photo-o","upload-text":"\u4E0A\u4F20\u56FE\u7247","max-count":"9","max-size":5*1024*1024,modelValue:a.value,"onUpdate:modelValue":u[3]||(u[3]=t=>a.value=t),"after-read":E,onDelete:f},null,8,["modelValue"]),a.value.length?N("",!0):(C(),c("p",Z,"\u4E0A\u4F20\u5185\u5BB9\u4EC5\u533B\u751F\u53EF\u89C1,\u6700\u591A9\u5F20\u56FE,\u6700\u59275MB"))])]),n(V,{class:z({disabled:B.value}),type:"primary",block:"",round:"",onClick:g},{default:h(()=>u[10]||(u[10]=[R("\u4E0B\u4E00\u6B65")])),_:1},8,["class"])])}}});const Bu=O($,[["__scopeId","data-v-bfc7ab81"]]);export{Bu as default};
