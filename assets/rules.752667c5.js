import{c as S,n as w,t as g,u as D,F as V,p as q,w as y}from"./index.e27673f9.js";import{u as R}from"./request.3cade431.js";import{d as T,c as $}from"./index.704bf49d.js";const[x,M]=S("form"),N={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:w,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:g,showErrorMessage:g,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var _=T({name:x,props:N,emits:["submit","failed"],setup(a,{emit:i,slots:l}){const{children:n,linkChildren:F}=D(V),o=e=>e?n.filter(t=>e.includes(t.name)):n,p=e=>new Promise((t,u)=>{const s=[];o(e).reduce((b,P)=>b.then(()=>{if(!s.length)return P.validate().then(B=>{B&&s.push(B)})}),Promise.resolve()).then(()=>{s.length?u(s):t()})}),E=e=>new Promise((t,u)=>{const s=o(e);Promise.all(s.map(r=>r.validate())).then(r=>{r=r.filter(Boolean),r.length?u(r):t()})}),h=e=>{const t=n.find(u=>u.name===e);return t?new Promise((u,s)=>{t.validate().then(r=>{r?s(r):u()})}):Promise.reject()},d=e=>typeof e=="string"?h(e):a.validateFirst?p(e):E(e),v=e=>{typeof e=="string"&&(e=[e]),o(e).forEach(u=>{u.resetValidation()})},A=()=>n.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),c=(e,t)=>{n.some(u=>u.name===e?(u.$el.scrollIntoView(t),!0):!1)},m=()=>n.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),f=()=>{const e=m();d().then(()=>i("submit",e)).catch(t=>{i("failed",{values:e,errors:t});const{scrollToError:u,scrollToErrorPosition:s}=a;u&&t[0].name&&c(t[0].name,s?{block:s}:void 0)})},C=e=>{q(e),f()};return F({props:a}),R({submit:f,validate:d,getValues:m,scrollToField:c,resetValidation:v,getValidationStatus:A}),()=>{var e;return $("form",{class:M(),onSubmit:C},[(e=l.default)==null?void 0:e.call(l)])}}});const j=y(_),K=[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},{pattern:/^1[3-9]\d{9}$/,message:"\u624B\u673A\u53F7\u7801\u4E0D\u6B63\u786E"}],W=[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"},{pattern:/^\w{8,24}$/,message:"\u5BC6\u7801\u5FC5\u987B\u662F8-24\u4E2A\u5B57\u7B26"}],X=[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},{pattern:/^\d{6}$/,message:"\u9A8C\u8BC1\u7801\u662F6\u4E2A\u6570\u5B57"}],Y=[{required:!0,message:"\u8BF7\u8F93\u5165\u771F\u5B9E\u59D3\u540D"},{pattern:/^(?:[\u4e00-\u9fa5Â·]{2,16})$/,message:"\u4E2D\u65872-16\u4E2A\u5B57\u7B26"}],z=[{required:!0,message:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7"},{pattern:/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/,message:"\u8EAB\u4EFD\u8BC1\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"}];export{j as F,X as c,z as i,K as m,Y as n,W as p};
